---
title: ã€GitHub Actionsã€‘Job Summaryã§GitHub Actionsã§ã®Pythonã®å®Ÿè¡Œçµæœã‚’è¦‹ã‚„ã™ãã™ã‚‹
tags:
  - Python
  - åˆå¿ƒè€…
  - å‚™å¿˜éŒ²
  - GitHubActions
private: false
updated_at: '2023-08-30T12:20:53+09:00'
id: dbec1493f690a2290729
organization_url_name: null
slide: false
---
# ã¯ã˜ã‚ã«

ã‚µã‚¤ã‚³ãƒ­ãŒæ€¥ã«å¿…è¦ã«ãªã£ãŸã®ã§ã€GitHub Actionsã§Pythonã‚’å‹•ã‹ã—ã¦1ï½6ã®æ•°å­—ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¡¨ç¤ºã•ã›ã¦ã¿ã¾ã™ã€‚(ç„¡ç†çŸ¢ç†éãã‚‹è©±é¡Œä½œã‚Š)
ymlãƒ•ã‚¡ã‚¤ãƒ«ã¨pythonã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```yaml:main.yml
name: main
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.x'
          architecture: 'x64'
      - name: Run Python
        run: python main.py
```

```python:main.py
import random

number = random.randint(1,6)
print('ã‚µã‚¤ã‚³ãƒ­ã®å‡ºç›®ã¯' + str(number) + 'ã§ã™')
```

ã€Œã“ã‚“ãªã‚³ãƒ¼ãƒ‰ã‚’GitHub Actionsã§å®Ÿè¡Œã™ã‚‹ã®ã‹ã€ã¨è¨€ã‚ã‚Œãã†ã§ã™ãŒã€ã€Œèª°ã‚‚ãŒå®Ÿè¡Œã—ãªã„ã€ã¨ã¯è¨€ã„åˆ‡ã‚Œãªã„ã¨æ€ã†ã®ã§ç„¡è¦–ã—ã¾ã™ã€‚(ã‚´ãƒªæŠ¼ã—)

GitHub Actionsã®å®Ÿè¡Œçµæœã¯ã“ã‚“ãªæ„Ÿã˜ã§è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![GitHub Actionsã®å®Ÿè¡Œçµæœ](https://raw.githubusercontent.com/SoniPana/Qiita_SoniPana/main/image/23/02/19/open.gif)

æ­£ç›´è¦‹ã¥ã‚‰ã„ã—ã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã®ãŒé¢å€’ã§ã™ã€‚
ã§ãã‚Œã°ã“ã®ç”»é¢ã®æ™‚ç‚¹ã§çµæœã‚’ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã§ã™ã€‚

![result](https://raw.githubusercontent.com/SoniPana/Qiita_SoniPana/main/image/23/02/19/summary_page.png)

ã‚°ã‚°ã£ã¦ã‚‚å‡ºã¦ã“ãªã‹ã£ãŸã®ã§å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦ã„ãŸã¨ã“ã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚

https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary

æ™®é€šã«æ›¸ã„ã¦ã‚ã‚‹ã˜ã‚ƒãªã„ã‹ã€‚

ã¨ã„ã†ã“ã¨ã§Pythonã®å®Ÿè¡Œçµæœã‚’è¡¨ç¤ºã•ã›ã¦ã„ãã¾ã™ã€‚


## å¯¾è±¡

ãƒ»GitHub Actionsã®åŸºæœ¬ã¯åˆ†ã‹ã£ã¦ã„ã‚‹äºº

# 1.pythonãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£

ã¾ãšã¯Pythonã®å¤‰æ•°ã®å€¤ã‚’ä»–ã®ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```python:main.py
import random
import subprocess

number = random.randint(1,6)
subprocess.run([f'echo "NUMBER={number}" >> $GITHUB_OUTPUT'], shell=True)
```

subprocessãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚ˆã£ã¦Pythonã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

ã¾ãŸã€```echo "{name}={value}" >> $GITHUB_OUTPUT```ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã§ã‚¹ãƒ†ãƒƒãƒ—ã®å‡ºåŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚
ä»Šå›ã®å ´åˆã€NUMBERã¨ã„ã†å¤‰æ•°ã«number(ã‚µã‚¤ã‚³ãƒ­ã®çµæœ)ã‚’ä»£å…¥ã—ã¦ã„ã¾ã™ã€‚

è©³ç´°â†“

https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions#setting-an-output-parameter

# 2.ymlãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£

ä»–ã®ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ãŸå¤‰æ•°ã®å€¤ã‚’Job Summaryã«è¡¨ç¤ºã•ã›ã¾ã™ã€‚

```yaml:main.yml
      # çœç•¥
      - uses: actions/setup-python@v4
        with:
          python-version: '3.x'
          architecture: 'x64'
      - name: Run Python
        id: result
        run: python main.py
      - name: Job Summary
        run: |
          echo '### ã‚µã‚¤ã‚³ãƒ­ã®å‡ºç›®: ${{ steps.result.outputs.NUMBER }}' >> $GITHUB_STEP_SUMMARY
```

```id: <idå>```ã§ä»–ã®ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
idåã¯ä»»æ„ã§ã™ã€‚ä»Šå›ã®å ´åˆã¯idåã‚’resultã«ã—ã¾ã—ãŸã€‚

```echo '<Markdown>' >> $GITHUB_STEP_SUMMARY```ã§Job Summaryã«è¡¨ç¤ºã•ã›ã‚‹å†…å®¹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ã¾ãŸã€```${{ steps.<idå>.outputs.<å¤‰æ•°å> }}```ã§idåãŒresultã®ã‚¹ãƒ†ãƒƒãƒ—ã®å‡ºåŠ›çµæœã‚’å‚ç…§ã§ãã¾ã™ã€‚
idåã¯resultã€å¤‰æ•°åã¯NUMBERã¨ã—ã¦ã„ã¾ã™ã€‚

è©³ç´°â†“

https://docs.github.com/ja/actions/learn-github-actions/contexts#steps-context:~:text=steps.%3Cstep_id%3E.outputs.%3Coutput_name%3E

ã€ŒidåãŒ"result"ã®ã‚¹ãƒ†ãƒƒãƒ—ã«ã‚ã‚‹"NUMBER"ã¨ã„ã†å¤‰æ•°ã®å€¤ã‚’Job Summaryã«è¡¨ç¤ºã•ã›ã‚‹ã€ã¨è¨€ãˆã°åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã—ã‚‡ã†ã‹ã€‚

# 3.å®Ÿè¡Œçµæœ

å®Ÿè¡Œçµæœã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚

![job](https://raw.githubusercontent.com/SoniPana/Qiita-Content/main/images/23/02/19/job.gif)

ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§çµæœãŒè¦‹ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã—ã‹ã‚‚å¤§ãã„ã‹ã‚‰è¦‹ã‚„ã™ã„ã€‚

# 4.ãŠã¾ã‘

ä¸€å¿œçµµæ–‡å­—ã‚‚ä½¿ãˆã‚‹ãã†ã§ã™ã€‚

https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions#example-of-adding-a-job-summary

ã¨ã„ã†ã“ã¨ã¯çš†å¤§å¥½ããªã€Œç¾å‘³ã—ã„ãƒ¤ãƒŸãƒ¼ã€ã‚‚è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹...ï¼Ÿ
æ—©é€Ÿ[ã“ã®Gist](https://gist.github.com/rxaviers/7360908)ã‚’å‚è€ƒã«çµµæ–‡å­—ã‚’å¤‰æ›ã—ã€ç¾å‘³ã—ã„ãƒ¤ãƒŸãƒ¼ã‚’è¡¨ç¤ºã•ã›ã¦ã¿ã¾ã—ãŸã€‚


```yaml:yummy.yml
name: yummy
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Job Summary
        run: |
          echo 'ç¾å‘³ã—ã„ãƒ¤ãƒŸãƒ¼:exclamation::sparkles::metal::grin::thumbsup:æ„Ÿè¬:exclamation::raised_hands::sparkles:æ„Ÿè¬:exclamation::raised_hands::sparkles:ã¾ãŸã„ã£ã±ã„é£Ÿã¹ãŸã„ãª:exclamation::meat_on_bone::yum::fork_and_knife::sparkles:ãƒ‡ãƒªã‚·ãƒ£ãƒƒâ€¼ï¸:pray::sparkles:ï½¼ï½¬â€¼ï¸:pray::sparkles: ï½¼ï½¬â€¼ï¸:pray::sparkles: ï½¼ï½¬â€¼ï¸:pray::sparkles: ï½¼ï½¬â€¼ï¸:pray::sparkles: ï½¼ï½¬â€¼ï¸:pray::sparkles: ï½¼ï½¬ï½¯ï½¯â€¼ãƒãƒƒãƒ”ãƒ¼:star2:ã‚¹ãƒã‚¤ãƒ«:exclamation::point_right::grin::point_left:' >> $GITHUB_STEP_SUMMARY
```

çµæœâ†“

![yummy](https://raw.githubusercontent.com/SoniPana/Qiita_SoniPana/main/image/23/02/19/yummy2.png)

è¦‹æ…£ã‚ŒãŸæ§‹æ–‡ãŒã¡ã‚ƒã‚“ã¨è¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚

ã¡ã‚‡ã£ã¨æ°—ã«ãªã£ãŸã®ã§ã€è©¦ã—ã«çµµæ–‡å­—ã‚’å¤‰æ›ã—ãªã„ã§å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸã€‚

```yaml:yummy.yml
name: yummy
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Job Summary
        run: |
          echo 'ç¾å‘³ã—ã„ãƒ¤ãƒŸãƒ¼â—ï¸âœ¨ğŸ¤ŸğŸ˜ğŸ‘æ„Ÿè¬â—ï¸ğŸ™Œâœ¨æ„Ÿè¬â—ï¸ğŸ™Œâœ¨ã¾ãŸã„ã£ã±ã„é£Ÿã¹ãŸã„ãªâ—ï¸ğŸ–ğŸ˜‹ğŸ´âœ¨ãƒ‡ãƒªã‚·ãƒ£ãƒƒâ€¼ï¸ğŸ™âœ¨ï½¼ï½¬â€¼ï¸ğŸ™âœ¨ ï½¼ï½¬â€¼ï¸ğŸ™âœ¨ ï½¼ï½¬â€¼ï¸ğŸ™âœ¨ ï½¼ï½¬â€¼ï¸ğŸ™âœ¨ ï½¼ï½¬â€¼ï¸ğŸ™âœ¨ ï½¼ï½¬ï½¯ï½¯â€¼ãƒãƒƒãƒ”ãƒ¼ğŸŒŸã‚¹ãƒã‚¤ãƒ«â—ï¸ğŸ‘‰ğŸ˜ğŸ‘ˆ' >> $GITHUB_STEP_SUMMARY
```

çµæœâ†“

![yummy2](https://raw.githubusercontent.com/SoniPana/Qiita_SoniPana/main/image/23/02/19/yummy3.png)

è¡¨ç¤ºã§ãã‚‹ã˜ã‚ƒãªã„ã‹ã€‚çµµæ–‡å­—å¤‰æ›ã—ã¦ã„ãŸæ™‚é–“è¿”ã—ã¦ãã‚Œã€‚

# ã‚³ãƒ¼ãƒ‰

https://github.com/Geusen-Qiita/Actions-Summary
